# Description: a programming library for color text mode
# URL: https://pagure.io/newt
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: slang popt python3
# Optional: tcl

name=libnewt
version=0.52.24
release=2
source=(https://releases.pagure.org/newt/newt-$version.tar.gz)

pkg_build() {


  if prt-get isinst tcl; then
    sed -i "s:tcl8.4:tcl8.6:" Makefile.in
    echo '#define USE_INTERP_RESULT 1' >> config.h
  fi

  ./autogen.sh
  ./configure --prefix=/usr --disable-nls

  make
  make DESTDIR=$PKG install
  rm -r $PKG/usr/share/locale

  # with python2 around, it populates this weird path
  rm -r $PKG/usr/lib/usr || true
}
