# Description: Application development toolkit for controlling system-wide privileges
# URL: https://gitlab.freedesktop.org/polkit/polkit/
# Maintainer: Tim Biermann, tbier at posteo dot de
# Depends on: dbus duktape gobject-introspection intltool util-linux glib

name=polkit
version=125
release=1
source=(https://github.com/$name-org/$name/archive/$version/$name-$version.tar.gz)

build() {
 

  cd $name-$version
mkdir build &&
cd    build &&

meson setup ..                   \
      --prefix=/usr              \
      --buildtype=release        \
      -D man=true                \
      -D session_tracking=logind \
      -D tests=true
grep 'print_indent'             ../subprojects/mocklibc-1.0/src/netgroup.c \
     | sed 's/ {/;/' >>         ../subprojects/mocklibc-1.0/src/netgroup.h &&

sed -i '1 i #include <stdio.h>' ../subprojects/mocklibc-1.0/src/netgroup.h
ninja
  DESTDIR=$PKG ninja install


  rm -r $PKG/usr/share/locale
}
